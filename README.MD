# Control de Veh칤culo con Flespi

Este proyecto permite monitorizar y controlar un veh칤culo en tiempo real mediante la API de [Flespi](https://flespi.com/). Incluye funcionalidades para registrar trayectos, visualizar estad칤sticas gr치ficas y recibir alertas por correo cuando el veh칤culo abandona zonas seguras definidas por el usuario.

## 游댢 Funcionalidades

- Consulta en tiempo real del estado del veh칤culo.
- Registro autom치tico de trayectos con guardado hist칩rico.
- Gr치ficas del uso del veh칤culo.
- Alertas por geocercas enviadas por correo electr칩nico.
- Interfaz web con control de acceso por clave.

## 游 Archivos a configurar

### `auto_recoge.php`
- **`$token`**: Token de acceso generado desde tu cuenta Flespi.
- **`$id`**: ID de tu dispositivo Teltonika (u otro compatible con Flespi).

### `datos_estado.php`
- **`$token`**: Token Flespi.
- **`$id`**: ID del dispositivo.

### `geofence_alert.php`
- **`$token`**: Token Flespi.
- **`$id`**: ID del dispositivo.
- **`$from`**: Direcci칩n de correo electr칩nico que enviar치 las alertas.
- **`$to`**: Direcci칩n de correo electr칩nico que recibir치 las alertas.
- **`$zonas`**: Array de coordenadas `[lat, lng]` que definen las zonas seguras.

### `index.php`
- **`$clave`**: Clave de acceso para visualizar la informaci칩n del veh칤culo desde el navegador. Esta clave se utilizar치 como medida b치sica de seguridad para proteger el acceso al panel.

## 游뎷 Tareas programadas (cron)

Para que el sistema funcione autom치ticamente, debes crear dos tareas programadas que se ejecuten cada minuto:

```bash
* * * * * /usr/bin/php /ruta/completa/auto_recoge.php
* * * * * /usr/bin/php /ruta/completa/geofence_alert.php
